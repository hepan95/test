{"uid":"87aa119984cb61b0","name":"后台工作看板》客户数据","fullName":"Test_casa.test_ict_long.Test_query01#test_query001","historyId":"d9786e8f047a085f57781f19398c972f","time":{"start":1677829678886,"stop":1677829678993,"duration":107},"description":"用例描述","descriptionHtml":"<p>用例描述</p>\n","status":"broken","statusMessage":"TypeError: a bytes-like object is required, not 'dict'","statusTrace":"self = <Test_casa.test_ict_long.Test_query01 object at 0x000000000417AAC0>\n\n    @allure.title(\"后台工作看板》客户数据\")   #类方法的注释\n    def test_query001(self):\n        '''用例描述'''\n        with allure.step(\"后台工作看板客户数据获取操作成功\"):\n            cf=ict.Test_query01().test_query001()\n            allure.attach(body=cf[1], name=\"请求地址\", attachment_type=allure.attachment_type.TEXT)\n>           allure.attach(body=cf[2], name=\"请求头\", attachment_type=allure.attachment_type.TEXT)\n\nTest_casa\\test_ict_long.py:76: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n..\\..\\lib\\site-packages\\allure_commons\\_allure.py:179: in __call__\n    plugin_manager.hook.attach_data(body=body, name=name, attachment_type=attachment_type, extension=extension)\n..\\..\\lib\\site-packages\\pluggy\\_hooks.py:265: in __call__\n    return self._hookexec(self.name, self.get_hookimpls(), kwargs, firstresult)\n..\\..\\lib\\site-packages\\pluggy\\_manager.py:80: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n..\\..\\lib\\site-packages\\allure_pytest\\listener.py:222: in attach_data\n    self.allure_logger.attach_data(uuid4(), body, name=name, attachment_type=attachment_type, extension=extension)\n..\\..\\lib\\site-packages\\allure_commons\\reporter.py:165: in attach_data\n    plugin_manager.hook.report_attached_data(body=body, file_name=file_name)\n..\\..\\lib\\site-packages\\pluggy\\_hooks.py:265: in __call__\n    return self._hookexec(self.name, self.get_hookimpls(), kwargs, firstresult)\n..\\..\\lib\\site-packages\\pluggy\\_manager.py:80: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <allure_commons.logger.AllureFileLogger object at 0x0000000003D1B220>\nbody = {'Content-Type': 'application/json', 'Cookie': 'token=68bd5d4d-d11b-4433-9930-3407109b668c:f091e3a3-89ea-47d6-811a-763f0db8c3c4'}\nfile_name = '8f877543-c1f3-474c-96cb-e6765d4d6968-attachment.txt'\n\n    @hookimpl\n    def report_attached_data(self, body, file_name):\n        destination = os.path.join(self._report_dir, file_name)\n        with open(destination, 'wb') as attached_file:\n            if isinstance(body, text_type):\n                attached_file.write(body.encode('utf-8'))\n            else:\n>               attached_file.write(body)\nE               TypeError: a bytes-like object is required, not 'dict'\n\n..\\..\\lib\\site-packages\\allure_commons\\logger.py:62: TypeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"_xunit_setup_class_fixture_Test_query01","time":{"start":1677829678885,"stop":1677829678885,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"testStage":{"description":"用例描述","status":"broken","statusMessage":"TypeError: a bytes-like object is required, not 'dict'","statusTrace":"self = <Test_casa.test_ict_long.Test_query01 object at 0x000000000417AAC0>\n\n    @allure.title(\"后台工作看板》客户数据\")   #类方法的注释\n    def test_query001(self):\n        '''用例描述'''\n        with allure.step(\"后台工作看板客户数据获取操作成功\"):\n            cf=ict.Test_query01().test_query001()\n            allure.attach(body=cf[1], name=\"请求地址\", attachment_type=allure.attachment_type.TEXT)\n>           allure.attach(body=cf[2], name=\"请求头\", attachment_type=allure.attachment_type.TEXT)\n\nTest_casa\\test_ict_long.py:76: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n..\\..\\lib\\site-packages\\allure_commons\\_allure.py:179: in __call__\n    plugin_manager.hook.attach_data(body=body, name=name, attachment_type=attachment_type, extension=extension)\n..\\..\\lib\\site-packages\\pluggy\\_hooks.py:265: in __call__\n    return self._hookexec(self.name, self.get_hookimpls(), kwargs, firstresult)\n..\\..\\lib\\site-packages\\pluggy\\_manager.py:80: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n..\\..\\lib\\site-packages\\allure_pytest\\listener.py:222: in attach_data\n    self.allure_logger.attach_data(uuid4(), body, name=name, attachment_type=attachment_type, extension=extension)\n..\\..\\lib\\site-packages\\allure_commons\\reporter.py:165: in attach_data\n    plugin_manager.hook.report_attached_data(body=body, file_name=file_name)\n..\\..\\lib\\site-packages\\pluggy\\_hooks.py:265: in __call__\n    return self._hookexec(self.name, self.get_hookimpls(), kwargs, firstresult)\n..\\..\\lib\\site-packages\\pluggy\\_manager.py:80: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <allure_commons.logger.AllureFileLogger object at 0x0000000003D1B220>\nbody = {'Content-Type': 'application/json', 'Cookie': 'token=68bd5d4d-d11b-4433-9930-3407109b668c:f091e3a3-89ea-47d6-811a-763f0db8c3c4'}\nfile_name = '8f877543-c1f3-474c-96cb-e6765d4d6968-attachment.txt'\n\n    @hookimpl\n    def report_attached_data(self, body, file_name):\n        destination = os.path.join(self._report_dir, file_name)\n        with open(destination, 'wb') as attached_file:\n            if isinstance(body, text_type):\n                attached_file.write(body.encode('utf-8'))\n            else:\n>               attached_file.write(body)\nE               TypeError: a bytes-like object is required, not 'dict'\n\n..\\..\\lib\\site-packages\\allure_commons\\logger.py:62: TypeError","steps":[{"name":"后台工作看板客户数据获取操作成功","time":{"start":1677829678886,"stop":1677829678982,"duration":96},"status":"broken","statusMessage":"TypeError: a bytes-like object is required, not 'dict'\n","statusTrace":"  File \"D:\\软件\\python\\xiangmu\\test_ICT_api\\Test_casa\\test_ict_long.py\", line 76, in test_query001\n    allure.attach(body=cf[2], name=\"请求头\", attachment_type=allure.attachment_type.TEXT)\n  File \"d:\\软件\\python\\lib\\site-packages\\allure_commons\\_allure.py\", line 179, in __call__\n    plugin_manager.hook.attach_data(body=body, name=name, attachment_type=attachment_type, extension=extension)\n  File \"d:\\软件\\python\\lib\\site-packages\\pluggy\\_hooks.py\", line 265, in __call__\n    return self._hookexec(self.name, self.get_hookimpls(), kwargs, firstresult)\n  File \"d:\\软件\\python\\lib\\site-packages\\pluggy\\_manager.py\", line 80, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"d:\\软件\\python\\lib\\site-packages\\pluggy\\_callers.py\", line 60, in _multicall\n    return outcome.get_result()\n  File \"d:\\软件\\python\\lib\\site-packages\\pluggy\\_result.py\", line 60, in get_result\n    raise ex[1].with_traceback(ex[2])\n  File \"d:\\软件\\python\\lib\\site-packages\\pluggy\\_callers.py\", line 39, in _multicall\n    res = hook_impl.function(*args)\n  File \"d:\\软件\\python\\lib\\site-packages\\allure_pytest\\listener.py\", line 222, in attach_data\n    self.allure_logger.attach_data(uuid4(), body, name=name, attachment_type=attachment_type, extension=extension)\n  File \"d:\\软件\\python\\lib\\site-packages\\allure_commons\\reporter.py\", line 165, in attach_data\n    plugin_manager.hook.report_attached_data(body=body, file_name=file_name)\n  File \"d:\\软件\\python\\lib\\site-packages\\pluggy\\_hooks.py\", line 265, in __call__\n    return self._hookexec(self.name, self.get_hookimpls(), kwargs, firstresult)\n  File \"d:\\软件\\python\\lib\\site-packages\\pluggy\\_manager.py\", line 80, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"d:\\软件\\python\\lib\\site-packages\\pluggy\\_callers.py\", line 60, in _multicall\n    return outcome.get_result()\n  File \"d:\\软件\\python\\lib\\site-packages\\pluggy\\_result.py\", line 60, in get_result\n    raise ex[1].with_traceback(ex[2])\n  File \"d:\\软件\\python\\lib\\site-packages\\pluggy\\_callers.py\", line 39, in _multicall\n    res = hook_impl.function(*args)\n  File \"d:\\软件\\python\\lib\\site-packages\\allure_commons\\logger.py\", line 62, in report_attached_data\n    attached_file.write(body)\n","steps":[],"attachments":[{"uid":"d8613cf987c4abde","name":"请求地址","source":"d8613cf987c4abde.txt","type":"text/plain","size":67},{"uid":"f308618ccf7c3b37","name":"请求头","source":"f308618ccf7c3b37.txt","type":"text/plain","size":0}],"parameters":[],"stepsCount":0,"hasContent":true,"shouldDisplayMessage":true,"attachmentsCount":2}],"attachments":[],"parameters":[],"stepsCount":1,"hasContent":true,"shouldDisplayMessage":true,"attachmentsCount":2},"afterStages":[{"name":"_xunit_setup_class_fixture_Test_query01::0","time":{"start":1677829693416,"stop":1677829693416,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"labels":[{"name":"parentSuite","value":"ict后台查询接口测试包"},{"name":"suite","value":"ict后台查询接口测试模块"},{"name":"subSuite","value":"后台端查询接口"},{"name":"host","value":"G-HGWL050090123"},{"name":"thread","value":"19000-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"Test_casa.test_ict_long"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":[]},"source":"87aa119984cb61b0.json","parameterValues":[]}